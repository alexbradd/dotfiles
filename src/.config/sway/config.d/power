### Idle configuration
set $lock swaylock -f

exec swayidle -w \
      lock '$lock' \
      timeout 600 'pgrep swaylock || $lock; swaymsg "output eDP-1 power off"' \
           resume 'swaymsg "output eDP-1 power on"' \
      timeout 1200 'systemctl suspend' \
      before-sleep 'pgrep swaylock || $lock'

set $exit_mode "Exit session"
mode --pango_markup $exit_mode {
  bindsym {
    h mode "default", exec swaynag -t 'warning' -m 'Shutdown computer?'  -B 'Yes' 'systemctl poweroff'  -s 'No'
    r mode "default", exec swaynag -t 'warning' -m 'Reboot computer?'    -B 'Yes' 'systemctl reboot'    -s 'No'
    d mode "default", exec swaynag -t 'warning' -m 'Hibernate computer?' -B 'Yes' 'systemctl hibernate' -s 'No'
    e mode "default", exec swaynag -t 'warning' -m 'Exit session?'       -B 'Yes' 'swaymsg exit'        -s 'No'
    s mode "default", exec systemctl suspend
    l mode "default", exec $lock
  }
  bindsym Return mode "default"
  bindsym Escape mode "default"
}
bindsym $mod+escape mode $exit_mode

set $connectivity_mode "Connectivity"
mode --pango_markup $connectivity_mode {
  bindsym {
    b exec rfkill toggle bluetooth
    w exec rfkill toggle wlan
  }
  bindsym Return mode "default"
  bindsym Escape mode "default"
}
bindsym $mod+alt+w mode $connectivity_mode

# vim: set ft=swayconfig:
